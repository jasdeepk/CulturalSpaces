<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article">

<head>

    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="/DataTables-1.10.4/media/css/jquery.dataTables.css">
    <!-- index stylesheets -->
    <link rel="stylesheet" href="/css/index.css">
    <!-- reset stylesheet -->
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.3.0/build/cssreset/reset-min.css">

    <title>Cultural Spaces</title>
    <!-- google sign-in -->
    <script src="https://apis.google.com/js/client:platform.js?onload=start" async defer></script>
    <script type="text/javascript">
    function signinCallback(authResult) {
      if (authResult['status']['signed_in']) {
                // Update the app to reflect a signed in user
                // Hide the sign-in button now that the user is authorized, for example:
                document.getElementById('signinButton').setAttribute('style', 'display: none');
            } else {
                // Update the app to reflect a signed out user
                // Possible error values:
                //   "user_signed_out" - User is signed-out
                //   "access_denied" - User denied access to your app
                //   "immediate_failed" - Could not automatically log in the user
                console.log('Sign-in state: ' + authResult['error']);
            }
        }

        </script>
        <!-- end google sign-in -->
        <script data-main="index" src="require.js"></script>
        <script type="text/javascript">

        require.config({
                //baseUrl: '',
                paths: {
                    jquery: 'jquery-2.1.1',
                    datatables: 'jquery.dataTables'
                },
                shim: {
                    "datatables": ["jquery"]
                }
            });

        </script>

        

        <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDJ525-htk7oLSiDCX3FopEs1UBY2K4JA">
        </script>
        <!--<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>-->
    </head>
    <body>



      <a id="top-bar" href="#index">CULTURAL SPACES</a>

      
      <div id="map-canvas"></div>

      <!-- end google sign-in button -->
      <table id="table"  border="0" cellpadding="0" cellspacing="0" class="pretty">
        <thead>
            <td>Favourites</td>
            <td>Latitude</td>
            <td>Longitude</td>
            <td>Name</td>
            <td>Address</td>
            <td>Web</td>
            <td>Type</td>
            <td>Hood</td>
        </thead>
    </table>
    <!-- Google+ share -->
    <div class="g-plus" data-action="share" data-annotation="inline" data-height="24"
    data-href="https://plus.google.com/"></div>
    <!-- Google+ like and sharable -->
    <div class="g-plusone" data-size="tall" data-annotation="inline" data-width="300" 
    data-href="https://plus.google.com/"></div>
    <!-- Google sign-in button-->
    <div id="signinButton">
        <span
        class="g-signin"
        data-clientid="183665922035-guv6irto0u06jqb7rah717vdhkd60rfe.apps.googleusercontent.com"
        data-redirecturi="postmessage"
        data-accesstype="offline"
        data-cookiepolicy="single_host_origin"
        data-requestvisibleactions="http://schema.org/AddAction"
        data-scope="https://www.googleapis.com/auth/plus.login"
        data-callback="signinCallback">
        </span>
    </div>
<div id="result"></div>


<!-- Last part of BODY element in file index.html -->
<script>
function signInCallback(authResult) {
  if (authResult['code']) {

    // Hide the sign-in button now that the user is authorized, for example:
    $('#signinButton').attr('style', 'display: none');

    // Send the code to the server
    $.ajax({
      type: 'POST',
      url: 'plus.php?storeToken',
      contentType: 'application/octet-stream; charset=utf-8',
      success: function(result) {
        // Handle or verify the server response if necessary.

        // Prints the list of people that the user has allowed the app to know
        // to the console.
        console.log(result);
        if (result['profile'] && result['people']){
          $('#results').html('Hello ' + result['profile']['displayName'] + '. You successfully made a server side call to people.get and people.list');
        } else {
          $('#results').html('Failed to make a server-side call. Check your configuration and console.');

        }
      },
      processData: false,
      data: authResult['code']
    });
  } else if (authResult['error']) {
    // There was an error.
    // Possible error codes:
    //   "access_denied" - User denied access to your app
    //   "immediate_failed" - Could not automatially log in the user
    // console.log('There was an error: ' + authResult['error']);
  }
}
</script>

</body>

</html>